"use strict";(globalThis.webpackChunkeigenbytes=globalThis.webpackChunkeigenbytes||[]).push([[6496],{8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const i={},c=r.createContext(i);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:n},e.children)}},8861(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"devops/docker/running-containers","title":"Running Containers","description":"Your First Container","source":"@site/docs/engineering/devops/05-docker/2 - running-containers.md","sourceDirName":"devops/05-docker","slug":"/devops/docker/running-containers","permalink":"/engineering/devops/docker/running-containers","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Running Containers","toc":{"max_depth":2}},"sidebar":"sidebar","previous":{"title":"What is Docker?","permalink":"/engineering/devops/docker/docker-introduction"},"next":{"title":"Images, Layers, and Dockerfile","permalink":"/engineering/devops/docker/images-layers-and-dockerfile"}}');var i=s(4848),c=s(8453);const t={title:"Running Containers",toc:{max_depth:2}},a="Running Containers: Hands-on Basics",o={},d=[{value:"Your First Container",id:"your-first-container",level:2},{value:"Running a Real Application",id:"running-a-real-application",level:2},{value:"Detached Mode: Running in Background",id:"detached-mode-running-in-background",level:2},{value:"Port Mapping: Accessing Your Container",id:"port-mapping-accessing-your-container",level:2},{value:"Naming Containers",id:"naming-containers",level:2},{value:"Viewing Logs",id:"viewing-logs",level:2},{value:"Executing Commands Inside Containers",id:"executing-commands-inside-containers",level:2},{value:"Container Lifecycle",id:"container-lifecycle",level:2},{value:"Creating Without Running",id:"creating-without-running",level:3},{value:"Stopping and Starting",id:"stopping-and-starting",level:3},{value:"Restarting",id:"restarting",level:3},{value:"Removing Containers",id:"removing-containers",level:3},{value:"Cleaning Up",id:"cleaning-up",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Automatic Restart Policies",id:"automatic-restart-policies",level:2},{value:"Resource Limits",id:"resource-limits",level:2},{value:"Volumes: Persistent Data",id:"volumes-persistent-data",level:2},{value:"Bind Mounts: Using Host Files",id:"bind-mounts-using-host-files",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Run and remove automatically",id:"run-and-remove-automatically",level:3},{value:"Interactive containers",id:"interactive-containers",level:3},{value:"Run a specific command",id:"run-a-specific-command",level:3},{value:"Background job",id:"background-job",level:3},{value:"Inspecting Containers",id:"inspecting-containers",level:2},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Most used commands",id:"most-used-commands",level:3},{value:"What You Should Understand",id:"what-you-should-understand",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"running-containers-hands-on-basics",children:"Running Containers: Hands-on Basics"})}),"\n",(0,i.jsx)(n.h2,{id:"your-first-container",children:"Your First Container"}),"\n",(0,i.jsx)(n.p,{children:"Let's run something. Open your terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run hello-world\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Unable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\n719385e32844: Pull complete\nDigest: sha256:88ec0acaa3ec199d3b7eaf73588f4518c25f9d34f58ce9a0df68429c5af48e8d\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n"})}),"\n",(0,i.jsx)(n.p,{children:"What just happened?"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Docker looked for an image called ",(0,i.jsx)(n.code,{children:"hello-world"})," on your machine"]}),"\n",(0,i.jsx)(n.li,{children:"Didn't find it, so pulled it from Docker Hub"}),"\n",(0,i.jsx)(n.li,{children:"Created a container from that image"}),"\n",(0,i.jsx)(n.li,{children:"Ran the container (which printed the message)"}),"\n",(0,i.jsx)(n.li,{children:"Container exited automatically"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Run it again:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run hello-world\n"})}),"\n",(0,i.jsx)(n.p,{children:"This time it's instant. The image is already on your machine."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key insight:"})," Docker caches images locally. First run downloads, subsequent runs reuse."]}),"\n",(0,i.jsx)(n.h2,{id:"running-a-real-application",children:"Running a Real Application"}),"\n",(0,i.jsx)(n.p,{children:"Let's run nginx (a web server):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Unable to find image 'nginx:latest' locally\nlatest: Pulling from library/nginx\na2abf6c4d29d: Pull complete\na9edb18cadd1: Pull complete\n589b7251471a: Pull complete\nDigest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31\nStatus: Downloaded newer image for nginx:latest\n/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n2024/01/15 10:23:45 [notice] 1#1: using the \"epoll\" event method\n2024/01/15 10:23:45 [notice] 1#1: nginx/1.25.3\n2024/01/15 10:23:45 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14)\n2024/01/15 10:23:45 [notice] 1#1: OS: Linux 5.15.0\n2024/01/15 10:23:45 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576\n2024/01/15 10:23:45 [notice] 1#1: start worker processes\n"})}),"\n",(0,i.jsx)(n.p,{children:"Your terminal is stuck. That's expected. Nginx is running in the foreground."}),"\n",(0,i.jsxs)(n.p,{children:["Press ",(0,i.jsx)(n.code,{children:"Ctrl+C"})," to stop it."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," The container blocked your terminal. You can't do anything else."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Run it in detached mode."]}),"\n",(0,i.jsx)(n.h2,{id:"detached-mode-running-in-background",children:"Detached Mode: Running in Background"}),"\n",(0,i.jsxs)(n.p,{children:["Add the ",(0,i.jsx)(n.code,{children:"-d"})," flag:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"8f3a2c9b1e4d5a6f7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0\n"})}),"\n",(0,i.jsx)(n.p,{children:"That long string is the container ID. The container is running in the background."}),"\n",(0,i.jsx)(n.p,{children:"Your terminal is free. Check what's running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES\n8f3a2c9b1e4d   nginx     "/docker-entrypoint.\u2026"   10 seconds ago  Up 9 seconds   80/tcp    inspiring_tesla\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Understanding the output:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CONTAINER ID:"})," First 12 characters of the full ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"IMAGE:"})," Which image was used"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"COMMAND:"})," What's running inside"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CREATED:"})," When the container was created"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"STATUS:"})," Current state (Up = running)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"PORTS:"})," Which ports are exposed (we'll fix this)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NAMES:"})," Random name Docker assigned"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Notice the PORTS column: ",(0,i.jsx)(n.code,{children:"80/tcp"}),". This means nginx is listening on port 80 inside the container. But you can't access it yet."]}),"\n",(0,i.jsx)(n.h2,{id:"port-mapping-accessing-your-container",children:"Port Mapping: Accessing Your Container"}),"\n",(0,i.jsx)(n.p,{children:"Stop the running container first:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stop 8f3a2c9b1e4d\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can use the container ID or name. Shorthand works too:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stop 8f3\n"})}),"\n",(0,i.jsx)(n.p,{children:"Docker matches partial IDs."}),"\n",(0,i.jsx)(n.p,{children:"Now run nginx with port mapping:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 8080:80 nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["What ",(0,i.jsx)(n.code,{children:"-p 8080:80"})," means:"]})}),"\n",(0,i.jsx)(n.mermaid,{value:"graph LR\n    A[Your Machine<br/>localhost:8080] --\x3e|Maps to| B[Container<br/>Port 80]\n    \n    style A fill:#e8f4f8\n    style B fill:#a8dadc"}),"\n",(0,i.jsxs)(n.p,{children:["Format: ",(0,i.jsx)(n.code,{children:"-p HOST_PORT:CONTAINER_PORT"})]}),"\n",(0,i.jsx)(n.p,{children:"Check it's running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                  NAMES\n2a3b4c5d6e7f   nginx     "/docker-entrypoint.\u2026"   5 seconds ago    Up 4 seconds    0.0.0.0:8080->80/tcp   brave_darwin\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Now PORTS shows: ",(0,i.jsx)(n.code,{children:"0.0.0.0:8080->80/tcp"}),". This means port 8080 on your machine maps to port 80 in the container."]}),"\n",(0,i.jsxs)(n.p,{children:["Open your browser and go to ",(0,i.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,i.jsx)(n.p,{children:"You'll see the nginx welcome page."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mental model:"})," Ports are like doorways. Without mapping, the container's door is closed to the outside. With mapping, you create a tunnel from your machine to the container."]}),"\n",(0,i.jsx)(n.h2,{id:"naming-containers",children:"Naming Containers"}),"\n",(0,i.jsxs)(n.p,{children:["Random names like ",(0,i.jsx)(n.code,{children:"brave_darwin"})," are hard to remember. Give your containers meaningful names:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 8080:80 --name my-web-server nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                  NAMES\n3b4c5d6e7f8a   nginx     "/docker-entrypoint.\u2026"   3 seconds ago   Up 2 seconds   0.0.0.0:8080->80/tcp   my-web-server\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now you can use the name instead of the ID:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stop my-web-server\ndocker start my-web-server\ndocker logs my-web-server\n"})}),"\n",(0,i.jsx)(n.p,{children:"Much cleaner."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Container names must be unique. You can't have two containers with the same name."]}),"\n",(0,i.jsx)(n.h2,{id:"viewing-logs",children:"Viewing Logs"}),"\n",(0,i.jsx)(n.p,{children:"Your container is running in the background. How do you see what it's doing?"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs my-web-server\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/\n2024/01/15 10:30:12 [notice] 1#1: using the "epoll" event method\n2024/01/15 10:30:12 [notice] 1#1: nginx/1.25.3\n2024/01/15 10:30:12 [notice] 1#1: start worker processes\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Visit ",(0,i.jsx)(n.code,{children:"http://localhost:8080"})," in your browser, then check logs again:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs my-web-server\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'[previous logs...]\n172.17.0.1 - - [15/Jan/2024:10:32:45 +0000] "GET / HTTP/1.1" 200 615 "-" "Mozilla/5.0..."\n'})}),"\n",(0,i.jsx)(n.p,{children:"You'll see the HTTP request logged."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Follow logs in real-time:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs -f my-web-server\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"-f"})," flag follows logs (like ",(0,i.jsx)(n.code,{children:"tail -f"}),"). Press ",(0,i.jsx)(n.code,{children:"Ctrl+C"})," to stop following."]}),"\n",(0,i.jsx)(n.h2,{id:"executing-commands-inside-containers",children:"Executing Commands Inside Containers"}),"\n",(0,i.jsx)(n.p,{children:"Sometimes you need to get inside a running container. Like SSH, but for containers."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker exec -it my-web-server bash\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"root@3b4c5d6e7f8a:/#\n"})}),"\n",(0,i.jsx)(n.p,{children:"You're now inside the container. The prompt changed."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What the flags mean:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-i"}),": Interactive (keep STDIN open)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"-t"}),": Allocate a pseudo-TTY (makes it feel like a real terminal)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Try some commands:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bin  boot  dev  docker-entrypoint.d  docker-entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is the container's filesystem. Not your host machine."}),"\n",(0,i.jsx)(n.p,{children:"Check nginx config:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cat /etc/nginx/nginx.conf\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check what processes are running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ps aux\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.1  11224  5432 ?        Ss   10:30   0:00 nginx: master process\nnginx       29  0.0  0.0  11680  2876 ?        S    10:30   0:00 nginx: worker process\nroot        30  0.0  0.0   4136  3524 pts/0    Ss   10:35   0:00 bash\nroot        39  0.0  0.0   7368  1628 pts/0    R+   10:36   0:00 ps aux\n"})}),"\n",(0,i.jsx)(n.p,{children:"Notice PID 1 is nginx. In containers, your application typically runs as PID 1."}),"\n",(0,i.jsx)(n.p,{children:"Exit the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"exit\n"})}),"\n",(0,i.jsx)(n.p,{children:"You're back on your host machine."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key insight:"})," ",(0,i.jsx)(n.code,{children:"docker exec"})," runs a new process inside an existing container. The container keeps running after you exit."]}),"\n",(0,i.jsx)(n.h2,{id:"container-lifecycle",children:"Container Lifecycle"}),"\n",(0,i.jsx)(n.p,{children:"Containers have states:"}),"\n",(0,i.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Created: docker create\n    Created --\x3e Running: docker start\n    Running --\x3e Paused: docker pause\n    Paused --\x3e Running: docker unpause\n    Running --\x3e Stopped: docker stop\n    Stopped --\x3e Running: docker start\n    Stopped --\x3e [*]: docker rm\n    Running --\x3e [*]: docker rm -f"}),"\n",(0,i.jsx)(n.h3,{id:"creating-without-running",children:"Creating Without Running"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker create --name my-nginx -p 8080:80 nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5\n"})}),"\n",(0,i.jsx)(n.p,{children:"Container is created but not started. Check it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"-a"})," flag shows all containers (including stopped ones)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS    PORTS     NAMES\n4c5d6e7f8a9b   nginx     "/docker-entrypoint.\u2026"   5 seconds ago    Created             my-nginx\n'})}),"\n",(0,i.jsx)(n.p,{children:'STATUS is "Created", not "Up".'}),"\n",(0,i.jsx)(n.p,{children:"Start it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker start my-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now it's running."}),"\n",(0,i.jsx)(n.h3,{id:"stopping-and-starting",children:"Stopping and Starting"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stop my-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"The container stops gracefully. Nginx gets SIGTERM, has 10 seconds to shut down cleanly."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker start my-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Starts the same container again. Same ID, same name, same configuration."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important distinction:"})," ",(0,i.jsx)(n.code,{children:"docker run"})," creates a new container. ",(0,i.jsx)(n.code,{children:"docker start"})," resumes an existing one."]}),"\n",(0,i.jsx)(n.h3,{id:"restarting",children:"Restarting"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker restart my-nginx\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This is ",(0,i.jsx)(n.code,{children:"docker stop"})," followed by ",(0,i.jsx)(n.code,{children:"docker start"}),". Useful when you want to reset the container's state."]}),"\n",(0,i.jsx)(n.h3,{id:"removing-containers",children:"Removing Containers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stop my-nginx\ndocker rm my-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Container is gone. Check:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,i.jsx)(n.p,{children:"It won't appear anymore."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Shortcut to force remove running container:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker rm -f my-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"This stops and removes in one command."}),"\n",(0,i.jsx)(n.h2,{id:"cleaning-up",children:"Cleaning Up"}),"\n",(0,i.jsx)(n.p,{children:"Stopped containers stick around until you remove them. Check all containers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker ps -a\n"})}),"\n",(0,i.jsx)(n.p,{children:"You might see many stopped containers. Remove them all:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker container prune\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"WARNING! This will remove all stopped containers.\nAre you sure you want to continue? [y/N] y\nDeleted Containers:\n8f3a2c9b1e4d5a6f7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0\n2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3\n\nTotal reclaimed space: 127MB\n"})}),"\n",(0,i.jsx)(n.p,{children:"All stopped containers are removed."}),"\n",(0,i.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsxs)(n.p,{children:["Pass environment variables to containers with ",(0,i.jsx)(n.code,{children:"-e"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name my-postgres \\\n  -e POSTGRES_PASSWORD=mysecretpassword \\\n  -p 5432:5432 \\\n  postgres\n"})}),"\n",(0,i.jsx)(n.p,{children:"Check logs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs my-postgres\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'The files belonging to this database system will be owned by user "postgres".\nThis user must also own the server process.\n\nPostgreSQL init process complete; ready for start up.\n\n2024-01-15 10:45:22.123 UTC [1] LOG:  starting PostgreSQL 16.1\n2024-01-15 10:45:22.456 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432\n2024-01-15 10:45:22.789 UTC [1] LOG:  database system is ready to accept connections\n'})}),"\n",(0,i.jsx)(n.p,{children:"PostgreSQL is running with your password."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Multiple environment variables:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name my-app \\\n  -e DATABASE_URL=postgres://localhost/mydb \\\n  -e API_KEY=abc123 \\\n  -e DEBUG=true \\\n  my-app-image\n"})}),"\n",(0,i.jsx)(n.h2,{id:"automatic-restart-policies",children:"Automatic Restart Policies"}),"\n",(0,i.jsx)(n.p,{children:"Containers stop when their main process exits. Sometimes you want them to restart automatically."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name my-app --restart unless-stopped nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Restart policies:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Policy"}),(0,i.jsx)(n.th,{children:"Behavior"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"no"})}),(0,i.jsx)(n.td,{children:"Never restart (default)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"on-failure"})}),(0,i.jsx)(n.td,{children:"Restart if container exits with error"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"always"})}),(0,i.jsx)(n.td,{children:"Always restart if stopped"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"unless-stopped"})}),(0,i.jsx)(n.td,{children:"Always restart unless explicitly stopped"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: on-failure with retry limit:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --restart on-failure:3 my-app\n"})}),"\n",(0,i.jsx)(n.p,{children:"Restart up to 3 times if it crashes."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mental model:"})," ",(0,i.jsx)(n.code,{children:"unless-stopped"})," is what you want for services that should survive machine reboots."]}),"\n",(0,i.jsx)(n.h2,{id:"resource-limits",children:"Resource Limits"}),"\n",(0,i.jsx)(n.p,{children:"Containers can consume all your CPU and memory. Limit them:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker run -d --name limited-nginx \\\n  --memory="256m" \\\n  --cpus="0.5" \\\n  nginx\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What this means:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'--memory="256m"'}),": Maximum 256MB of RAM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'--cpus="0.5"'}),": Maximum 50% of one CPU core"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The container can't use more than these limits."}),"\n",(0,i.jsx)(n.p,{children:"Check resource usage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stats limited-nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT   MEM %     NET I/O       BLOCK I/O   PIDS\n5d6e7f8a9b0c   limited-nginx   0.01%     3.2MiB / 256MiB     1.25%     1.2kB / 0B    0B / 0B     3\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Press ",(0,i.jsx)(n.code,{children:"Ctrl+C"})," to exit."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Real-time stats for all containers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker stats\n"})}),"\n",(0,i.jsx)(n.h2,{id:"volumes-persistent-data",children:"Volumes: Persistent Data"}),"\n",(0,i.jsx)(n.p,{children:"Containers are ephemeral. When you remove a container, its data is gone."}),"\n",(0,i.jsx)(n.p,{children:"Test this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --name temp-ubuntu ubuntu bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Inside the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo "Important data" > /data.txt\ncat /data.txt\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Important data\n"})}),"\n",(0,i.jsx)(n.p,{children:"Exit:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"exit\n"})}),"\n",(0,i.jsx)(n.p,{children:"Remove the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker rm temp-ubuntu\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run it again:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --name temp-ubuntu ubuntu bash\ncat /data.txt\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cat: /data.txt: No such file or directory\n"})}),"\n",(0,i.jsx)(n.p,{children:"The file is gone. New container, fresh filesystem."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution: Volumes"})}),"\n",(0,i.jsx)(n.p,{children:"Create a volume:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker volume create my-data\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run a container with the volume:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --name persistent-ubuntu -v my-data:/data ubuntu bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Inside the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo "Important data" > /data/file.txt\ncat /data/file.txt\nexit\n'})}),"\n",(0,i.jsx)(n.p,{children:"Remove the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker rm persistent-ubuntu\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run a new container with the same volume:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --name another-ubuntu -v my-data:/data ubuntu bash\ncat /data/file.txt\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Important data\n"})}),"\n",(0,i.jsx)(n.p,{children:"The data persisted!"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Mental model:"})," Volumes are like external hard drives. Containers come and go, but volumes stay."]}),"\n",(0,i.jsx)(n.h2,{id:"bind-mounts-using-host-files",children:"Bind Mounts: Using Host Files"}),"\n",(0,i.jsx)(n.p,{children:"Sometimes you want to use files from your host machine."}),"\n",(0,i.jsx)(n.p,{children:"Create a directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'mkdir ~/my-website\necho "<h1>Hello from bind mount</h1>" > ~/my-website/index.html\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run nginx with a bind mount:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name my-site \\\n  -p 8080:80 \\\n  -v ~/my-website:/usr/share/nginx/html \\\n  nginx\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Visit ",(0,i.jsx)(n.code,{children:"http://localhost:8080"})," - you'll see your HTML."]}),"\n",(0,i.jsx)(n.p,{children:"Edit the file on your host:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'echo "<h1>Updated content</h1>" > ~/my-website/index.html\n'})}),"\n",(0,i.jsx)(n.p,{children:"Refresh your browser. The change appears immediately."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key difference:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Volume:"})," Managed by Docker, stored in Docker's storage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bind mount:"})," Direct link to host filesystem"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use volumes for:"})," Database data, application state"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use bind mounts for:"})," Development (live code reloading)"]}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"run-and-remove-automatically",children:"Run and remove automatically"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm -it ubuntu bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"--rm"})," flag removes the container when it exits. Useful for one-off tasks."]}),"\n",(0,i.jsx)(n.h3,{id:"interactive-containers",children:"Interactive containers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it python:3.11 python\n"})}),"\n",(0,i.jsx)(n.p,{children:"Starts Python REPL inside a container. Great for testing."}),"\n",(0,i.jsx)(n.h3,{id:"run-a-specific-command",children:"Run a specific command"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run ubuntu ls /etc\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Runs ",(0,i.jsx)(n.code,{children:"ls /etc"})," inside Ubuntu container, shows output, exits."]}),"\n",(0,i.jsx)(n.h3,{id:"background-job",children:"Background job"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d --name backup-job my-backup-script\n"})}),"\n",(0,i.jsx)(n.p,{children:"Runs your backup script in the background."}),"\n",(0,i.jsx)(n.h2,{id:"inspecting-containers",children:"Inspecting Containers"}),"\n",(0,i.jsx)(n.p,{children:"Get detailed information about a container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker inspect my-web-server\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output:"})," (truncated)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "Id": "3b4c5d6e7f8a...",\n        "Created": "2024-01-15T10:30:12.123Z",\n        "Path": "/docker-entrypoint.sh",\n        "Args": [\n            "nginx",\n            "-g",\n            "daemon off;"\n        ],\n        "State": {\n            "Status": "running",\n            "Running": true,\n            "Paused": false,\n            "Restarting": false,\n            "OOMKilled": false,\n            "Dead": false,\n            "Pid": 12345,\n            "ExitCode": 0,\n            "StartedAt": "2024-01-15T10:30:12.456Z"\n        },\n        "NetworkSettings": {\n            "IPAddress": "172.17.0.2",\n            "Ports": {\n                "80/tcp": [\n                    {\n                        "HostIp": "0.0.0.0",\n                        "HostPort": "8080"\n                    }\n                ]\n            }\n        }\n    }\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Useful for debugging. You can filter with ",(0,i.jsx)(n.code,{children:"--format"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker inspect --format='{{.State.Status}}' my-web-server\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"running\n"})}),"\n",(0,i.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,i.jsx)(n.h3,{id:"most-used-commands",children:"Most used commands"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run container\ndocker run [OPTIONS] IMAGE [COMMAND]\n\n# Common options\n-d              # Detached mode (background)\n-p 8080:80      # Port mapping\n--name my-app   # Name the container\n-e VAR=value    # Environment variable\n-v vol:/path    # Volume mount\n--rm            # Remove after exit\n-it             # Interactive terminal\n\n# Container management\ndocker ps                  # List running containers\ndocker ps -a               # List all containers\ndocker stop CONTAINER      # Stop container\ndocker start CONTAINER     # Start stopped container\ndocker restart CONTAINER   # Restart container\ndocker rm CONTAINER        # Remove container\ndocker rm -f CONTAINER     # Force remove running container\n\n# Logs and execution\ndocker logs CONTAINER      # View logs\ndocker logs -f CONTAINER   # Follow logs\ndocker exec -it CONTAINER bash  # Get shell inside\n\n# Cleanup\ndocker container prune     # Remove all stopped containers\ndocker system prune        # Remove unused data\n"})}),"\n",(0,i.jsx)(n.h2,{id:"what-you-should-understand",children:"What You Should Understand"}),"\n",(0,i.jsx)(n.p,{children:"After working through these examples, you should grasp:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Container lifecycle:"})," Created \u2192 Running \u2192 Stopped \u2192 Removed"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Port mapping:"})," How containers expose services to your host"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Detached vs interactive:"})," When to run in background vs foreground"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Persistence:"})," Why containers lose data and how volumes solve this"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Resource control:"})," How to limit CPU and memory usage"]}),"\n",(0,i.jsx)(n.p,{children:"If you can spin up a container, map its ports, check its logs, and exec into it, you're operational with Docker containers."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Remember:"})," Running containers is the daily work of Docker. These commands will become muscle memory. The concepts - isolation, port mapping, volumes - are what matter long-term."]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);