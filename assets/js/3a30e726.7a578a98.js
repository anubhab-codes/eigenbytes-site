"use strict";(globalThis.webpackChunkeigenbytes=globalThis.webpackChunkeigenbytes||[]).push([[5442],{1933(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"devops/docker/images-layers-and-dockerfile","title":"Images, Layers, and Dockerfile","description":"What You\'ll Learn","source":"@site/docs/engineering/devops/05-docker/3 - images-layers-and-dockerfile.md","sourceDirName":"devops/05-docker","slug":"/devops/docker/images-layers-and-dockerfile","permalink":"/engineering/devops/docker/images-layers-and-dockerfile","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Images, Layers, and Dockerfile","toc":{"max_depth":2}},"sidebar":"sidebar","previous":{"title":"Running Containers","permalink":"/engineering/devops/docker/running-containers"},"next":{"title":"Containers Are Ephemeral: Volumes and Data","permalink":"/engineering/devops/docker/volumes-and-data"}}');var s=i(4848),l=i(8453);const a={title:"Images, Layers, and Dockerfile",toc:{max_depth:2}},t="Docker Fundamentals: Images, Layers, and Dockerfiles",d={},c=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Part 1: Understanding Docker Images",id:"part-1-understanding-docker-images",level:2},{value:"What is a Docker Image?",id:"what-is-a-docker-image",level:3},{value:"Seeing Images in Action",id:"seeing-images-in-action",level:3},{value:"Part 2: Understanding Layers",id:"part-2-understanding-layers",level:2},{value:"The Layer Concept",id:"the-layer-concept",level:3},{value:"Seeing Layers in Practice",id:"seeing-layers-in-practice",level:3},{value:"Layer Caching: A Powerful Feature",id:"layer-caching-a-powerful-feature",level:3},{value:"Part 3: Writing Your First Dockerfile",id:"part-3-writing-your-first-dockerfile",level:2},{value:"What is a Dockerfile?",id:"what-is-a-dockerfile",level:3},{value:"Basic Dockerfile Structure",id:"basic-dockerfile-structure",level:3},{value:"Hands-On: Build a Simple Python App",id:"hands-on-build-a-simple-python-app",level:3},{value:"Part 4: Advanced Dockerfile Techniques",id:"part-4-advanced-dockerfile-techniques",level:2},{value:"Multi-Stage Builds",id:"multi-stage-builds",level:3},{value:"Layer Optimization Example",id:"layer-optimization-example",level:3},{value:"Part 5: Practical Examples",id:"part-5-practical-examples",level:2},{value:"Example 1: Node.js Application",id:"example-1-nodejs-application",level:3},{value:"Example 2: Flask Web Application",id:"example-2-flask-web-application",level:3},{value:"Part 6: Essential Docker Commands Reference",id:"part-6-essential-docker-commands-reference",level:2},{value:"Image Management",id:"image-management",level:3},{value:"Building Images",id:"building-images",level:3},{value:"Container Operations",id:"container-operations",level:3},{value:"Cleanup Commands",id:"cleanup-commands",level:3},{value:"Part 7: Common Pitfalls and Solutions",id:"part-7-common-pitfalls-and-solutions",level:2},{value:"Pitfall 1: Large Image Sizes",id:"pitfall-1-large-image-sizes",level:3},{value:"Pitfall 2: Rebuilding Dependencies Every Time",id:"pitfall-2-rebuilding-dependencies-every-time",level:3},{value:"Pitfall 3: Running as Root",id:"pitfall-3-running-as-root",level:3},{value:"Part 8: Mental Model Summary",id:"part-8-mental-model-summary",level:2},{value:"The Complete Picture",id:"the-complete-picture",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3},{value:"Practice Exercises",id:"practice-exercises",level:2},{value:"Exercise 1: Build a Simple Static Website",id:"exercise-1-build-a-simple-static-website",level:3},{value:"Exercise 2: Multi-Stage Build",id:"exercise-2-multi-stage-build",level:3},{value:"Exercise 3: Optimized Python App",id:"exercise-3-optimized-python-app",level:3},{value:"Quick Reference Card",id:"quick-reference-card",level:2},{value:"Most Common Commands",id:"most-common-commands",level:3},{value:"Dockerfile Instructions",id:"dockerfile-instructions",level:3},{value:"Final Thoughts",id:"final-thoughts",level:2}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"docker-fundamentals-images-layers-and-dockerfiles",children:"Docker Fundamentals: Images, Layers, and Dockerfiles"})}),"\n",(0,s.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this guide, you'll understand:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"What Docker images actually are (not just theory)"}),"\n",(0,s.jsx)(n.li,{children:"How layers work and why they matter"}),"\n",(0,s.jsx)(n.li,{children:"How to write effective Dockerfiles"}),"\n",(0,s.jsx)(n.li,{children:"Practical commands with real output examples"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Time Required:"})," 30-45 minutes"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prerequisites:"})," Basic command line knowledge"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-1-understanding-docker-images",children:"Part 1: Understanding Docker Images"}),"\n",(0,s.jsx)(n.h3,{id:"what-is-a-docker-image",children:"What is a Docker Image?"}),"\n",(0,s.jsxs)(n.p,{children:["Think of a Docker image as a ",(0,s.jsx)(n.strong,{children:"template"})," or ",(0,s.jsx)(n.strong,{children:"blueprint"})," for creating containers. It's like a recipe that contains:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The operating system (usually a lightweight Linux)"}),"\n",(0,s.jsx)(n.li,{children:"Your application code"}),"\n",(0,s.jsx)(n.li,{children:"Dependencies your application needs"}),"\n",(0,s.jsx)(n.li,{children:"Configuration files"}),"\n",(0,s.jsx)(n.li,{children:"Commands to run your application"}),"\n"]}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n    A[Docker Image<br/>Blueprint] --\x3e|Creates| B[Container 1<br/>Running Instance]\n    A --\x3e|Creates| C[Container 2<br/>Running Instance]\n    A --\x3e|Creates| D[Container N<br/>Running Instance]\n    \n    style A fill:#e8f4f8\n    style B fill:#a8dadc\n    style C fill:#a8dadc\n    style D fill:#a8dadc"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," An image is read-only and immutable. Once created, it doesn't change. Containers are running instances created from images."]}),"\n",(0,s.jsx)(n.h3,{id:"seeing-images-in-action",children:"Seeing Images in Action"}),"\n",(0,s.jsx)(n.p,{children:"Let's start with something practical. First, check what images you have:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker images\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output (if you're just starting):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"REPOSITORY    TAG       IMAGE ID       CREATED       SIZE\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is empty because you don't have any images yet. Let's pull one:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker pull nginx\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Using default tag: latest\nlatest: Pulling from library/nginx\na2abf6c4d29d: Pull complete\na9edb18cadd1: Pull complete\n589b7251471a: Pull complete\n186b1aaa4aa6: Pull complete\nb4df32aa5a72: Pull complete\na0bcbecc962e: Pull complete\nDigest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31\nStatus: Downloaded newer image for nginx:latest\ndocker.io/library/nginx:latest\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What just happened?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Docker downloaded the nginx web server image"}),"\n",(0,s.jsxs)(n.li,{children:["Each line starting with a hash (like ",(0,s.jsx)(n.code,{children:"a2abf6c4d29d"}),") is a layer being downloaded"]}),"\n",(0,s.jsx)(n.li,{children:"The image was pulled from Docker Hub (the default registry)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Now check your images again:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker images\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"REPOSITORY   TAG       IMAGE ID       CREATED        SIZE\nnginx        latest    605c77e624dd   2 weeks ago    141MB\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Understanding the output:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"REPOSITORY:"})," Name of the image (nginx)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TAG:"})," Version label (latest means most recent)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IMAGE ID:"})," Unique identifier (like a fingerprint)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CREATED:"})," When this image was built"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SIZE:"})," How much disk space it uses"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," Images are stored locally after pulling. You only download them once, then reuse them."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-2-understanding-layers",children:"Part 2: Understanding Layers"}),"\n",(0,s.jsx)(n.h3,{id:"the-layer-concept",children:"The Layer Concept"}),"\n",(0,s.jsx)(n.p,{children:"Docker images are built in layers, stacked on top of each other. Each layer represents a change or addition to the filesystem."}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    A[Base Layer: Ubuntu OS<br/>Size: 72MB] --\x3e B[Layer 2: Install Python<br/>Size: 45MB]\n    B --\x3e C[Layer 3: Copy application code<br/>Size: 5MB]\n    C --\x3e D[Layer 4: Install dependencies<br/>Size: 18MB]\n    D --\x3e E[Final Image<br/>Total: 140MB]\n    \n    style A fill:#e8f4f8\n    style B fill:#c8e4f0\n    style C fill:#a8d4e8\n    style D fill:#88c4e0\n    style E fill:#68b4d8"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why Layers Matter:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Efficiency:"})," Layers are reused across images"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Speed:"})," Only changed layers need to be downloaded/uploaded"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Storage:"})," Common layers are shared, saving disk space"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"seeing-layers-in-practice",children:"Seeing Layers in Practice"}),"\n",(0,s.jsx)(n.p,{children:"Let's inspect the nginx image to see its layers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker history nginx\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'IMAGE          CREATED        CREATED BY                                      SIZE      COMMENT\n605c77e624dd   2 weeks ago    CMD ["nginx" "-g" "daemon off;"]                0B        \n<missing>      2 weeks ago    STOPSIGNAL SIGQUIT                              0B        \n<missing>      2 weeks ago    EXPOSE map[80/tcp:{}]                           0B        \n<missing>      2 weeks ago    ENTRYPOINT ["/docker-entrypoint.sh"]            0B        \n<missing>      2 weeks ago    COPY docker-entrypoint.sh / # buildkit          1.2kB     \n<missing>      2 weeks ago    RUN /bin/sh -c set -x     && addgroup --syst\u2026   61MB      \n<missing>      2 weeks ago    ENV PKG_RELEASE=1~bookworm                      0B        \n<missing>      2 weeks ago    ENV NJS_VERSION=0.8.2                           0B        \n<missing>      2 weeks ago    ENV NGINX_VERSION=1.25.3                        0B        \n<missing>      2 weeks ago    LABEL maintainer=NGINX Docker Maintainers <d\u2026   0B        \n<missing>      2 weeks ago    /bin/sh -c #(nop)  CMD ["bash"]                 0B        \n<missing>      2 weeks ago    /bin/sh -c #(nop) ADD file:d0447c4be323c89c7\u2026   74.8MB   \n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Understanding the output:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Each row is a layer"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SIZE:"})," Shows what each layer added (0B means just metadata)"]}),"\n",(0,s.jsx)(n.li,{children:"The largest layers are actual file changes (74.8MB base OS, 61MB nginx installation)"}),"\n",(0,s.jsx)(n.li,{children:"Layers are listed from newest (top) to oldest (bottom)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"layer-caching-a-powerful-feature",children:"Layer Caching: A Powerful Feature"}),"\n",(0,s.jsx)(n.p,{children:"When you build an image, Docker caches each layer. If nothing changes, Docker reuses the cached layer instead of rebuilding."}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant You\n    participant Docker\n    participant Cache\n    \n    You->>Docker: Build image (first time)\n    Docker->>Docker: Execute Layer 1\n    Docker->>Cache: Save Layer 1\n    Docker->>Docker: Execute Layer 2\n    Docker->>Cache: Save Layer 2\n    Docker->>You: Build complete\n    \n    You->>Docker: Build again (no changes)\n    Docker->>Cache: Use Layer 1 (cached)\n    Docker->>Cache: Use Layer 2 (cached)\n    Docker->>You: Build complete (much faster!)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," Order matters! Put things that change frequently at the bottom of your Dockerfile, and stable things at the top."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-3-writing-your-first-dockerfile",children:"Part 3: Writing Your First Dockerfile"}),"\n",(0,s.jsx)(n.h3,{id:"what-is-a-dockerfile",children:"What is a Dockerfile?"}),"\n",(0,s.jsx)(n.p,{children:"A Dockerfile is a text file containing instructions for building a Docker image. Think of it as a recipe."}),"\n",(0,s.jsx)(n.h3,{id:"basic-dockerfile-structure",children:"Basic Dockerfile Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Start from a base image\nFROM ubuntu:22.04\n\n# Set working directory\nWORKDIR /app\n\n# Copy files\nCOPY . .\n\n# Install dependencies\nRUN apt-get update && apt-get install -y python3\n\n# Define what runs when container starts\nCMD ["python3", "app.py"]\n'})}),"\n",(0,s.jsx)(n.p,{children:"Let's break down each instruction:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FROM"})}),(0,s.jsx)(n.td,{children:"Specifies base image"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FROM python:3.11"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"WORKDIR"})}),(0,s.jsx)(n.td,{children:"Sets working directory"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"WORKDIR /app"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"COPY"})}),(0,s.jsx)(n.td,{children:"Copies files from host to image"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"COPY app.py ."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RUN"})}),(0,s.jsx)(n.td,{children:"Executes commands during build"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RUN pip install flask"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CMD"})}),(0,s.jsx)(n.td,{children:"Default command when container starts"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'CMD ["python", "app.py"]'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"EXPOSE"})}),(0,s.jsx)(n.td,{children:"Documents which port to use"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"EXPOSE 8000"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ENV"})}),(0,s.jsx)(n.td,{children:"Sets environment variables"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ENV DEBUG=true"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"hands-on-build-a-simple-python-app",children:"Hands-On: Build a Simple Python App"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 1: Create your project directory"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir my-first-docker-app\ncd my-first-docker-app\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 2: Create a simple Python application"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a file named ",(0,s.jsx)(n.code,{children:"app.py"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# app.py\nprint("Hello from Docker!")\nprint("This is my first containerized application.")\n\nimport time\nfor i in range(5):\n    print(f"Running... {i+1}")\n    time.sleep(1)\n\nprint("Application finished!")\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 3: Create a Dockerfile"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a file named ",(0,s.jsx)(n.code,{children:"Dockerfile"})," (no extension):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Use Python 3.11 as base image\nFROM python:3.11-slim\n\n# Set the working directory inside the container\nWORKDIR /app\n\n# Copy our application file into the container\nCOPY app.py .\n\n# This is what runs when the container starts\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 4: Build the image"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -t my-python-app .\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[+] Building 12.3s (8/8) FINISHED\n => [internal] load build definition from Dockerfile                       0.0s\n => => transferring dockerfile: 285B                                       0.0s\n => [internal] load .dockerignore                                          0.0s\n => => transferring context: 2B                                            0.0s\n => [internal] load metadata for docker.io/library/python:3.11-slim        2.1s\n => [1/3] FROM docker.io/library/python:3.11-slim@sha256:abc123...         8.2s\n => => resolve docker.io/library/python:3.11-slim@sha256:abc123...         0.0s\n => => sha256:abc123... 1.65kB / 1.65kB                                    0.0s\n => => sha256:def456... 6.15kB / 6.15kB                                    0.0s\n => => sha256:ghi789... 49.59MB / 49.59MB                                  4.2s\n => => extracting sha256:ghi789...                                         3.8s\n => [internal] load build context                                          0.0s\n => => transferring context: 245B                                          0.0s\n => [2/3] WORKDIR /app                                                     0.3s\n => [3/3] COPY app.py .                                                    0.0s\n => exporting to image                                                     0.1s\n => => exporting layers                                                    0.1s\n => => writing image sha256:xyz123...                                      0.0s\n => => naming to docker.io/library/my-python-app                           0.0s\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Understanding the build output:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"[1/3]"}),", ",(0,s.jsx)(n.code,{children:"[2/3]"}),", ",(0,s.jsx)(n.code,{children:"[3/3]"})," correspond to each instruction in your Dockerfile"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"FROM"})," instruction takes longest (downloading base image)"]}),"\n",(0,s.jsx)(n.li,{children:"Subsequent builds will be faster due to caching"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Let's verify the image was created:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker images\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"REPOSITORY       TAG       IMAGE ID       CREATED          SIZE\nmy-python-app    latest    xyz123abc      10 seconds ago   125MB\nnginx            latest    605c77e624dd   2 weeks ago      141MB\npython           3.11-slim abc789def      3 weeks ago      125MB\n"})}),"\n",(0,s.jsx)(n.p,{children:"Notice:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Your new image ",(0,s.jsx)(n.code,{children:"my-python-app"})," appears"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"python:3.11-slim"})," base image is also listed (pulled during build)"]}),"\n",(0,s.jsx)(n.li,{children:"Both are 125MB because your app barely adds any size"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Step 5: Run your container"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run my-python-app\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Hello from Docker!\nThis is my first containerized application.\nRunning... 1\nRunning... 2\nRunning... 3\nRunning... 4\nRunning... 5\nApplication finished!\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," You just built and ran your first containerized application! The entire Python environment and your code are packaged together."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-4-advanced-dockerfile-techniques",children:"Part 4: Advanced Dockerfile Techniques"}),"\n",(0,s.jsx)(n.h3,{id:"multi-stage-builds",children:"Multi-Stage Builds"}),"\n",(0,s.jsx)(n.p,{children:"Sometimes you need tools to build your application but don't need them in the final image. Multi-stage builds solve this."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example: Building a Go application"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Stage 1: Build the application\nFROM golang:1.21 AS builder\nWORKDIR /app\nCOPY . .\nRUN go build -o myapp\n\n# Stage 2: Create minimal runtime image\nFROM alpine:latest\nWORKDIR /app\nCOPY --from=builder /app/myapp .\nCMD ["./myapp"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What happens here:"})}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n    A[Stage 1: Builder<br/>golang:1.21<br/>Size: 800MB] --\x3e|Only copy<br/>compiled binary| B[Stage 2: Runtime<br/>alpine<br/>Size: 15MB]\n    \n    style A fill:#ff6b6b\n    style B fill:#a8dadc"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Result:"})," Final image is 15MB instead of 800MB!"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," Use multi-stage builds to keep final images small. Build tools stay in the builder stage; only the result goes to the final image."]}),"\n",(0,s.jsx)(n.h3,{id:"layer-optimization-example",children:"Layer Optimization Example"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Bad Dockerfile (inefficient layering):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\nWORKDIR /app\n\n# This invalidates cache every time app.py changes\nCOPY . .\nRUN pip install -r requirements.txt\n\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Good Dockerfile (optimized layering):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\nWORKDIR /app\n\n# Copy and install dependencies first (changes rarely)\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\n# Copy application code last (changes frequently)\nCOPY . .\n\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why this is better:"})}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    A[First Build] --\x3e B[Layer 1: Base Image]\n    B --\x3e C[Layer 2: Dependencies<br/>CACHED]\n    C --\x3e D[Layer 3: App Code]\n    \n    E[Second Build<br/>Code changed] --\x3e F[Layer 1: Base Image<br/>CACHED]\n    F --\x3e G[Layer 2: Dependencies<br/>CACHED - Reused!]\n    G --\x3e H[Layer 3: App Code<br/>Rebuilt]\n    \n    style C fill:#a8dadc\n    style G fill:#a8dadc"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mental Note:"})," Put stable, slow-to-change items early in your Dockerfile. Put fast-changing items (like your source code) at the end."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-5-practical-examples",children:"Part 5: Practical Examples"}),"\n",(0,s.jsx)(n.h3,{id:"example-1-nodejs-application",children:"Example 1: Node.js Application"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Project structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my-node-app/\n  \u251c\u2500\u2500 package.json\n  \u251c\u2500\u2500 package-lock.json\n  \u251c\u2500\u2500 app.js\n  \u2514\u2500\u2500 Dockerfile\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"package.json:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-node-app",\n  "version": "1.0.0",\n  "dependencies": {\n    "express": "^4.18.0"\n  },\n  "scripts": {\n    "start": "node app.js"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"app.js:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\nconst app = express();\n\napp.get('/', (req, res) => {\n  res.send('Hello from Node.js in Docker!');\n});\n\napp.listen(3000, () => {\n  console.log('Server running on port 3000');\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dockerfile:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Use official Node.js image\nFROM node:18-alpine\n\n# Set working directory\nWORKDIR /app\n\n# Copy package files first\nCOPY package*.json ./\n\n# Install dependencies\nRUN npm install\n\n# Copy application code\nCOPY . .\n\n# Expose the port\nEXPOSE 3000\n\n# Start the application\nCMD ["npm", "start"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Build and run:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -t my-node-app .\ndocker run -p 3000:3000 my-node-app\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Server running on port 3000\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now visit ",(0,s.jsx)(n.code,{children:"http://localhost:3000"})," in your browser!"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Understanding the ",(0,s.jsx)(n.code,{children:"-p"})," flag:"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-p 3000:3000"})," maps port 3000 on your machine to port 3000 in the container"]}),"\n",(0,s.jsxs)(n.li,{children:["Format: ",(0,s.jsx)(n.code,{children:"-p HOST_PORT:CONTAINER_PORT"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-2-flask-web-application",children:"Example 2: Flask Web Application"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Project structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my-flask-app/\n  \u251c\u2500\u2500 requirements.txt\n  \u251c\u2500\u2500 app.py\n  \u2514\u2500\u2500 Dockerfile\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"requirements.txt:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Flask==3.0.0\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"app.py:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return '<h1>Hello from Flask in Docker!</h1>'\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Dockerfile:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\n\nWORKDIR /app\n\n# Copy and install dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application\nCOPY app.py .\n\nEXPOSE 5000\n\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Build and run:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -t my-flask-app .\ndocker run -p 5000:5000 my-flask-app\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" * Serving Flask app 'app'\n * Debug mode: off\nWARNING: This is a development server. Do not use it in a production deployment.\n * Running on all addresses (0.0.0.0)\n * Running on http://127.0.0.1:5000\n * Running on http://172.17.0.2:5000\nPress CTRL+C to quit\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Visit ",(0,s.jsx)(n.code,{children:"http://localhost:5000"})," to see your app!"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-6-essential-docker-commands-reference",children:"Part 6: Essential Docker Commands Reference"}),"\n",(0,s.jsx)(n.h3,{id:"image-management",children:"Image Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List all images\ndocker images\n\n# Pull an image from Docker Hub\ndocker pull ubuntu:22.04\n\n# Remove an image\ndocker rmi nginx\n\n# Remove unused images\ndocker image prune\n\n# View image details\ndocker inspect nginx\n\n# Tag an image\ndocker tag my-app:latest my-app:v1.0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"building-images",children:"Building Images"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Build from current directory\ndocker build -t my-app .\n\n# Build with specific Dockerfile\ndocker build -t my-app -f Dockerfile.prod .\n\n# Build without cache\ndocker build --no-cache -t my-app .\n\n# Build with build arguments\ndocker build --build-arg VERSION=1.0 -t my-app .\n"})}),"\n",(0,s.jsx)(n.h3,{id:"container-operations",children:"Container Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Run a container\ndocker run my-app\n\n# Run in background (detached mode)\ndocker run -d my-app\n\n# Run with port mapping\ndocker run -p 8080:80 nginx\n\n# Run with name\ndocker run --name my-container nginx\n\n# Run with volume mount\ndocker run -v /host/path:/container/path my-app\n\n# List running containers\ndocker ps\n\n# List all containers (including stopped)\ndocker ps -a\n\n# Stop a container\ndocker stop my-container\n\n# Remove a container\ndocker rm my-container\n\n# View container logs\ndocker logs my-container\n\n# Execute command in running container\ndocker exec -it my-container bash\n"})}),"\n",(0,s.jsx)(n.h3,{id:"cleanup-commands",children:"Cleanup Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Remove all stopped containers\ndocker container prune\n\n# Remove all unused images\ndocker image prune -a\n\n# Remove all unused volumes\ndocker volume prune\n\n# Remove everything unused\ndocker system prune -a\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-7-common-pitfalls-and-solutions",children:"Part 7: Common Pitfalls and Solutions"}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-1-large-image-sizes",children:"Pitfall 1: Large Image Sizes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem:"})," Your image is 2GB for a simple application."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use slim or alpine base images"}),"\n",(0,s.jsx)(n.li,{children:"Use multi-stage builds"}),"\n",(0,s.jsx)(n.li,{children:"Clean up in the same RUN command"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:"# Bad - Creates multiple layers with cache\nFROM ubuntu:22.04\nRUN apt-get update\nRUN apt-get install -y python3\nRUN apt-get clean\n\n# Good - Single layer, cleans up in same step\nFROM ubuntu:22.04\nRUN apt-get update && \\\n    apt-get install -y python3 && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-2-rebuilding-dependencies-every-time",children:"Pitfall 2: Rebuilding Dependencies Every Time"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem:"})," Every code change reinstalls all dependencies."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Copy dependency files first."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:"# Bad\nCOPY . .\nRUN pip install -r requirements.txt\n\n# Good\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pitfall-3-running-as-root",children:"Pitfall 3: Running as Root"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem:"})," Container runs as root user (security risk)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solution:"})," Create and use a non-root user."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\n\n# Create a non-root user\nRUN useradd -m -u 1000 appuser\n\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY . .\n\n# Switch to non-root user\nUSER appuser\n\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-8-mental-model-summary",children:"Part 8: Mental Model Summary"}),"\n",(0,s.jsx)(n.h3,{id:"the-complete-picture",children:"The Complete Picture"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TB\n    A[Dockerfile<br/>Recipe/Instructions] --\x3e|docker build| B[Docker Image<br/>Template/Blueprint]\n    B --\x3e|docker run| C[Container 1<br/>Running Instance]\n    B --\x3e|docker run| D[Container 2<br/>Running Instance]\n    \n    E[Layer 1: Base OS] --\x3e F[Layer 2: Dependencies]\n    F --\x3e G[Layer 3: App Code]\n    G --\x3e B\n    \n    style A fill:#e8f4f8\n    style B fill:#a8dadc\n    style C fill:#ffd93d\n    style D fill:#ffd93d"}),"\n",(0,s.jsx)(n.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Images are layered"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Each Dockerfile instruction creates a layer"}),"\n",(0,s.jsx)(n.li,{children:"Layers are cached and reused"}),"\n",(0,s.jsx)(n.li,{children:"Order matters for efficiency"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Dockerfile best practices"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Put stable things first (dependencies)"}),"\n",(0,s.jsx)(n.li,{children:"Put changing things last (code)"}),"\n",(0,s.jsx)(n.li,{children:"Use specific base image versions"}),"\n",(0,s.jsx)(n.li,{children:"Clean up in the same RUN command"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Keep images small"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use alpine or slim variants"}),"\n",(0,s.jsx)(n.li,{children:"Use multi-stage builds"}),"\n",(0,s.jsx)(n.li,{children:"Remove unnecessary files"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Security matters"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Don't run as root"}),"\n",(0,s.jsx)(n.li,{children:"Don't include secrets in images"}),"\n",(0,s.jsx)(n.li,{children:"Use official base images"}),"\n",(0,s.jsx)(n.li,{children:"Keep base images updated"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"practice-exercises",children:"Practice Exercises"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-1-build-a-simple-static-website",children:"Exercise 1: Build a Simple Static Website"}),"\n",(0,s.jsx)(n.p,{children:"Create a Dockerfile that serves a static HTML page with nginx."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:"FROM nginx:alpine\nCOPY index.html /usr/share/nginx/html/\nEXPOSE 80\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exercise-2-multi-stage-build",children:"Exercise 2: Multi-Stage Build"}),"\n",(0,s.jsx)(n.p,{children:"Create a multi-stage build for a simple Go application."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'# Build stage\nFROM golang:1.21 AS builder\nWORKDIR /app\nCOPY main.go .\nRUN go build -o app main.go\n\n# Runtime stage\nFROM alpine:latest\nWORKDIR /app\nCOPY --from=builder /app/app .\nCMD ["./app"]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"exercise-3-optimized-python-app",children:"Exercise 3: Optimized Python App"}),"\n",(0,s.jsx)(n.p,{children:"Create an optimized Dockerfile for a Python application with dependencies."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\n\nRUN useradd -m -u 1000 appuser\n\nWORKDIR /app\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\nUSER appuser\n\nCMD ["python", "app.py"]\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"quick-reference-card",children:"Quick Reference Card"}),"\n",(0,s.jsx)(n.h3,{id:"most-common-commands",children:"Most Common Commands"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Task"}),(0,s.jsx)(n.th,{children:"Command"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Build image"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker build -t name ."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Run container"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run name"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Run in background"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -d name"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Map ports"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker run -p 8080:80 name"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"List images"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker images"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"List containers"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker ps"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Stop container"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker stop container-name"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"View logs"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker logs container-name"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Execute command"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker exec -it container-name bash"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Remove image"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker rmi image-name"})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"dockerfile-instructions",children:"Dockerfile Instructions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Instruction"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FROM"}),(0,s.jsx)(n.td,{children:"Set base image"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WORKDIR"}),(0,s.jsx)(n.td,{children:"Set working directory"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"COPY"}),(0,s.jsx)(n.td,{children:"Copy files to image"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RUN"}),(0,s.jsx)(n.td,{children:"Execute command during build"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CMD"}),(0,s.jsx)(n.td,{children:"Default command for container"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"EXPOSE"}),(0,s.jsx)(n.td,{children:"Document port usage"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENV"}),(0,s.jsx)(n.td,{children:"Set environment variable"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"final-thoughts",children:"Final Thoughts"}),"\n",(0,s.jsx)(n.p,{children:"You now understand:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"What Docker images are and how they work"}),"\n",(0,s.jsx)(n.li,{children:"How layers improve efficiency and speed"}),"\n",(0,s.jsx)(n.li,{children:"How to write effective Dockerfiles"}),"\n",(0,s.jsx)(n.li,{children:"Common patterns and best practices"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Next Steps:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Practice building images for your own applications"}),"\n",(0,s.jsx)(n.li,{children:"Explore Docker Compose for multi-container applications"}),"\n",(0,s.jsx)(n.li,{children:"Learn about Docker registries and image distribution"}),"\n",(0,s.jsx)(n.li,{children:"Study container orchestration with Kubernetes"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Remember: Docker is a tool to make deployment easier. Start simple, and gradually adopt more advanced patterns as needed."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Happy containerizing!"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var r=i(6540);const s={},l=r.createContext(s);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);